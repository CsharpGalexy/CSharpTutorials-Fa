# اصول برنامه‌نویسی شیء‌گرا (OOP Principles)

این سند به توضیح چهار اصل اساسی برنامه‌نویسی شیء‌گرا (OOP) به همراه مثال‌های کاربردی در زبان C# می‌پردازد. این اصول شامل کپسوله‌سازی، ارث‌بری، چندریختی و انتزاع هستند که به بهبود ساختار، امنیت و نگهداری کد کمک می‌کنند.

---

## 1️⃣ کپسوله‌سازی (Encapsulation)

🔹 **تعریف کامل‌تر**:  
کپسوله‌سازی به معنای جمع‌آوری داده‌ها (Data) و رفتارها (Methods) در یک واحد به نام کلاس است. این اصل باعث می‌شود:

- داده‌ها از دسترسی مستقیم و غیرمجاز بیرونی محافظت شوند (مثلاً جلوگیری از تغییر مستقیم موجودی حساب بانکی).
- دسترسی به داده‌ها فقط از طریق متدها یا ویژگی‌هایی (Properties) که ما تعریف می‌کنیم، انجام شود.
- این یکی از مهم‌ترین اصول برای افزایش امنیت و کنترل داده‌ها در برنامه‌نویسی شیء‌گرا است.

📌 **مزایا**:
- محافظت از داده‌ها
- کاهش خطاهای برنامه‌نویسی
- ساده‌تر شدن نگهداری و توسعه کد

🔹 **مثال در C#**:
```csharp
class BankAccount
{
    private double balance; // فیلد خصوصی، مستقیماً از بیرون قابل دسترسی نیست

    public void Deposit(double amount)
    {
        if (amount > 0)
            balance += amount; // تغییر موجودی فقط از طریق این متد
    }

    public double GetBalance()
    {
        return balance; // دسترسی به موجودی فقط از طریق این متد
    }
}

// استفاده
BankAccount account = new BankAccount();
account.Deposit(5000);
Console.WriteLine($"موجودی: {account.GetBalance()} تومان");
```

📝 **توضیح کد**:
- فیلد `balance` به صورت `private` تعریف شده و از بیرون کلاس قابل دسترسی نیست.
- متد `Deposit` با شرط `amount > 0` از ثبت مقادیر منفی یا اشتباه جلوگیری می‌کند.
- متد `GetBalance` امکان مشاهده موجودی را فراهم می‌کند.
- 👉 این یعنی **کپسوله‌سازی**: کنترل کامل دسترسی به داده‌ها از طریق مسیرهای تعریف‌شده.

---

## 2️⃣ ارث‌بری (Inheritance)

🔹 **تعریف کامل‌تر**:  
ارث‌بری اجازه می‌دهد یک کلاس جدید (فرزند) ویژگی‌ها و رفتارهای یک کلاس دیگر (والد) را به ارث ببرد. کلاس والد قابلیت‌های عمومی را تعریف می‌کند و کلاس فرزند می‌تواند این قابلیت‌ها را استفاده کرده و ویژگی‌های جدیدی اضافه کند.

📌 **مزایا**:
- جلوگیری از تکرار کد (DRY: Don’t Repeat Yourself)
- ایجاد ساختار سلسله‌مراتبی بین کلاس‌ها
- توسعه و نگهداری آسان‌تر کد

🔹 **مثال در C#**:
```csharp
class Vehicle // کلاس والد
{
    public string Brand { get; set; }

    public void Drive()
    {
        Console.WriteLine($"{Brand} در حال حرکت است...");
    }
}

class Car : Vehicle // کلاس فرزند
{
    public int Doors { get; set; }
}

// استفاده
Car myCar = new Car { Brand = "BMW", Doors = 4 };
myCar.Drive();
```

📝 **توضیح کد**:
- کلاس `Vehicle` شامل ویژگی `Brand` و متد `Drive` است.
- کلاس `Car` از `Vehicle` ارث‌بری کرده و علاوه بر دسترسی به `Brand` و `Drive`، ویژگی `Doors` را اضافه کرده است.
- 👉 ارث‌بری باعث می‌شود کدهای مشترک در کلاس والد نوشته شوند و کلاس فرزند آن‌ها را بازاستفاده کند.

---

## 3️⃣ چندریختی (Polymorphism)

🔹 **تعریف کامل‌تر**:  
چندریختی به این معناست که یک نام (مثل یک متد) می‌تواند رفتارهای متفاوتی در کلاس‌های مختلف داشته باشد. به عبارت ساده: **یک دستور، چند رفتار**.

📌 **انواع چندریختی**:
- **Overloading (بارگذاری متد)**: متدهایی با نام یکسان اما پارامترهای متفاوت.
- **Overriding (بازنویسی متد)**: تغییر پیاده‌سازی متد کلاس والد در کلاس فرزند.

🔹 **مثال در C#**:
```csharp
class Animal
{
    public virtual void Speak()
    {
        Console.WriteLine("حیوان صدا می‌دهد...");
    }
}

class Dog : Animal
{
    public override void Speak()
    {
        Console.WriteLine("سگ: واق واق!");
    }
}

class Cat : Animal
{
    public override void Speak()
    {
        Console.WriteLine("گربه: میاو!");
    }
}

// استفاده
Animal a1 = new Dog();
Animal a2 = new Cat();

a1.Speak(); // سگ: واق واق!
a2.Speak(); // گربه: میاو!
```

📝 **توضیح کد**:
- متد `Speak` در کلاس `Animal` به صورت `virtual` تعریف شده تا امکان بازنویسی در کلاس‌های فرزند وجود داشته باشد.
- کلاس‌های `Dog` و `Cat` متد `Speak` را با رفتار خاص خودشان بازنویسی کرده‌اند.
- 👉 چندریختی باعث می‌شود یک متد با نام یکسان رفتارهای متفاوتی در کلاس‌های مختلف داشته باشد.

---

## 4️⃣ انتزاع (Abstraction)

🔹 **تعریف کامل‌تر**:  
انتزاع یعنی مخفی کردن جزئیات غیرضروری و نمایش تنها اطلاعات مهم و ضروری. در این روش، ما فقط با تعریف کلی کار می‌کنیم و پیاده‌سازی جزئیات به کلاس‌های فرزند واگذار می‌شود.

📌 **راه‌های پیاده‌سازی در C#**:
- کلاس‌های `abstract`
- رابط‌ها (Interfaces)

🔹 **مثال در C#**:
```csharp
abstract class Shape
{
    public abstract double GetArea(); // متد انتزاعی بدون پیاده‌سازی
}

class Circle : Shape
{
    public double Radius { get; set; }
    public override double GetArea()
    {
        return Math.PI * Radius * Radius;
    }
}

class Rectangle : Shape
{
    public double Width { get; set; }
    public double Height { get; set; }
    public override double GetArea()
    {
        return Width * Height;
    }
}

// استفاده
Shape circle = new Circle { Radius = 5 };
Shape rectangle = new Rectangle { Width = 4, Height = 6 };

Console.WriteLine($"مساحت دایره: {circle.GetArea()}");
Console.WriteLine($"مساحت مستطیل: {rectangle.GetArea()}");
```

📝 **توضیح کد**:
- کلاس `Shape` انتزاعی است و متد `GetArea` را بدون پیاده‌سازی تعریف کرده است.
- کلاس‌های `Circle` و `Rectangle` متد `GetArea` را به شیوه خاص خودشان پیاده‌سازی کرده‌اند.
- 👉 انتزاع به ما کمک می‌کند روی **چه چیزی** (محاسبه مساحت) تمرکز کنیم، نه **چگونه** (جزئیات محاسبه).

---

این اصول پایه‌های برنامه‌نویسی شیء‌گرا هستند و استفاده صحیح از آن‌ها می‌تواند کدها را تمیزتر، قابل‌نگهداری‌تر و مقیاس‌پذیرتر کند. برای مطالعه بیشتر، می‌توانید به مستندات زبان C# یا منابع آموزشی OOP مراجعه کنید.